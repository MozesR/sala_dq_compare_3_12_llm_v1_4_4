<!doctype html><html><head><meta charset="utf-8"><title>Dashboard</title><link rel="stylesheet" href="/static/style.css"></head>
<body><header><h1>ðŸ“Š Dashboard (v1.4.4)</h1><p><a href="/">Rules</a> â€¢ <a href="/dashboard">Dashboard</a> â€¢ <a href="/history">Run History</a> â€¢ <a href="/compare">Compare</a> â€¢ <a href="/schema">Schema</a></p></header>
<main>
<section class="panel"><h2>Upload CSV</h2><input type="file" id="file"><button id="uploadBtn">Upload</button> <span id="msg"></span></section>
<section class="panel"><h2>Audit Summary (last upload)</h2><table class="table" id="audit"><thead><tr><th>Action</th><th>Column</th><th>Rows affected</th></tr></thead><tbody><tr><td colspan="3">Upload a CSV to see a summary.</td></tr></tbody></table></section>
</main>
<script>
async function renderAudit(a){const tb=document.querySelector('#audit tbody');tb.innerHTML='';['assign','impute','compute'].forEach(k=>{Object.entries(a[k]||{}).forEach(([c,v])=>{const tr=document.createElement('tr');tr.innerHTML=`<td>${k}</td><td>${c}</td><td>${v}</td>`;tb.appendChild(tr);});});}
document.getElementById('uploadBtn').onclick=async()=>{const f=document.getElementById('file').files[0];if(!f){document.getElementById('msg').textContent='Pick a CSV';return;}const fd=new FormData();fd.append('file',f);const r=await fetch('/api/upload',{method:'POST',body:fd});const j=await r.json();if(j.ok){document.getElementById('msg').textContent='Uploaded âœ”';renderAudit(j.report.transform_audit);}else{document.getElementById('msg').textContent='Error: '+(j.error||'unknown');}};
</script></body></html>
